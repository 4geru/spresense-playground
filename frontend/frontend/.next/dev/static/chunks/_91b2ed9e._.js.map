{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/4geru/space/spresense/spresense-slideshow/lib/supabase.ts"],"sourcesContent":["import { ImageData } from './types';\n\nconst supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL;\nconst supabaseKey = process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY;\n\n/**\n * Supabase„Åã„ÇâÂÖ®ÁîªÂÉè„ÇíÂèñÂæó\n */\nexport async function fetchImages(): Promise<ImageData[]> {\n  if (!supabaseUrl || !supabaseKey) {\n    throw new Error('Supabase configuration missing');\n  }\n\n  const response = await fetch(`${supabaseUrl}/functions/v1/get-original-images`, {\n    method: 'GET',\n    headers: {\n      'Authorization': `Bearer ${supabaseKey}`,\n      'apikey': supabaseKey,\n      'Content-Type': 'application/json'\n    },\n    cache: 'no-store', // Â∏∏„Å´ÊúÄÊñ∞„Éá„Éº„Çø„ÇíÂèñÂæó\n  });\n\n  if (!response.ok) {\n    const errorText = await response.text();\n    throw new Error(`HTTP error! status: ${response.status} - ${errorText}`);\n  }\n\n  const result = await response.json();\n\n  if (result.success && result.images) {\n    return result.images.map((image: any) => ({\n      name: image.name,\n      url: image.url,\n      created_at: image.created_at,\n      size: image.size\n    }));\n  }\n\n  throw new Error(result.error || 'No images returned from Edge Function');\n}\n"],"names":[],"mappings":";;;;AAEoB;AAApB,MAAM;AACN,MAAM;AAKC,eAAe;IACpB;;IAIA,MAAM,WAAW,MAAM,MAAM,GAAG,YAAY,iCAAiC,CAAC,EAAE;QAC9E,QAAQ;QACR,SAAS;YACP,iBAAiB,CAAC,OAAO,EAAE,aAAa;YACxC,UAAU;YACV,gBAAgB;QAClB;QACA,OAAO;IACT;IAEA,IAAI,CAAC,SAAS,EAAE,EAAE;QAChB,MAAM,YAAY,MAAM,SAAS,IAAI;QACrC,MAAM,IAAI,MAAM,CAAC,oBAAoB,EAAE,SAAS,MAAM,CAAC,GAAG,EAAE,WAAW;IACzE;IAEA,MAAM,SAAS,MAAM,SAAS,IAAI;IAElC,IAAI,OAAO,OAAO,IAAI,OAAO,MAAM,EAAE;QACnC,OAAO,OAAO,MAAM,CAAC,GAAG,CAAC,CAAC,QAAe,CAAC;gBACxC,MAAM,MAAM,IAAI;gBAChB,KAAK,MAAM,GAAG;gBACd,YAAY,MAAM,UAAU;gBAC5B,MAAM,MAAM,IAAI;YAClB,CAAC;IACH;IAEA,MAAM,IAAI,MAAM,OAAO,KAAK,IAAI;AAClC","debugId":null}},
    {"offset": {"line": 45, "column": 0}, "map": {"version":3,"sources":["file:///Users/4geru/space/spresense/spresense-slideshow/lib/utils.ts"],"sourcesContent":["/**\n * „Éï„Ç°„Ç§„É´Âêç„Åã„ÇâÂÆâÂÆö„Åó„Åü„Éè„ÉÉ„Ç∑„É•ID„ÇíÁîüÊàê\n * Âêå„Åò„Éï„Ç°„Ç§„É´Âêç„Å™„ÇâÂ∏∏„Å´Âêå„Åò„Éè„ÉÉ„Ç∑„É•ID„ÅåÁîüÊàê„Åï„Çå„Çã\n */\nexport function generateHashId(fileName: string): string {\n  let hash = 0;\n  for (let i = 0; i < fileName.length; i++) {\n    const char = fileName.charCodeAt(i);\n    hash = ((hash << 5) - hash) + char;\n    hash = hash & hash; // Convert to 32bit integer\n  }\n\n  // Áµ∂ÂØæÂÄ§„ÇíÂèñ„Å£„Å¶16ÈÄ≤Êï∞„Å´Â§âÊèõÔºà9ÊñáÂ≠óÔºâ\n  return Math.abs(hash).toString(16).padStart(9, '0').substring(0, 9);\n}\n\n/**\n * „Éè„ÉÉ„Ç∑„É•ID„Åã„ÇâÂØæÂøú„Åô„ÇãÁîªÂÉè„ÇíÊ§úÁ¥¢\n */\nexport function findImageByHashId(images: { name: string; [key: string]: any }[], hashId: string) {\n  return images.find(img => generateHashId(img.name) === hashId);\n}\n\n/**\n * Supabase„ÅÆÁîªÂÉèURL„Çí„Çµ„É†„Éç„Ç§„É´Áî®„Å´Â§âÊèõ\n * ÁîªÂÉèÂ§âÊèõAPI„Çí‰ΩøÁî®„Åó„Å¶„Çµ„É†„Éç„Ç§„É´„ÇíÂèñÂæó\n */\nexport function getThumbnailUrl(originalUrl: string, width: number = 400, height: number = 400): string {\n  // „Åæ„ÅöÂÖÉ„ÅÆURL„Çí„Åù„ÅÆ„Åæ„ÅæËøî„ÅôÔºàÁîªÂÉèÂ§âÊèõAPI„Åå‰Ωø„Åà„Å™„ÅÑÂ†¥ÂêàÔºâ\n  // TODO: SupabaseÁîªÂÉèÂ§âÊèõAPI„ÅåÊúâÂäπ„Å™Â†¥Âêà„ÅØ‰ª•‰∏ã„ÅÆ„Ç≥„Éº„Éâ„Çí‰ΩøÁî®\n  /*\n  const url = originalUrl.replace(\n    '/storage/v1/object/public/',\n    '/storage/v1/render/image/public/'\n  );\n  return `${url}?width=${width}&height=${height}&resize=cover&quality=80`;\n  */\n\n  // ‰∏ÄÊôÇÁöÑ„Å´ÂÖÉ„ÅÆURL„ÇíËøî„Åô\n  return originalUrl;\n}\n"],"names":[],"mappings":"AAAA;;;CAGC;;;;;;;;AACM,SAAS,eAAe,QAAgB;IAC7C,IAAI,OAAO;IACX,IAAK,IAAI,IAAI,GAAG,IAAI,SAAS,MAAM,EAAE,IAAK;QACxC,MAAM,OAAO,SAAS,UAAU,CAAC;QACjC,OAAO,AAAC,CAAC,QAAQ,CAAC,IAAI,OAAQ;QAC9B,OAAO,OAAO,MAAM,2BAA2B;IACjD;IAEA,sBAAsB;IACtB,OAAO,KAAK,GAAG,CAAC,MAAM,QAAQ,CAAC,IAAI,QAAQ,CAAC,GAAG,KAAK,SAAS,CAAC,GAAG;AACnE;AAKO,SAAS,kBAAkB,MAA8C,EAAE,MAAc;IAC9F,OAAO,OAAO,IAAI,CAAC,CAAA,MAAO,eAAe,IAAI,IAAI,MAAM;AACzD;AAMO,SAAS,gBAAgB,WAAmB,EAAE,QAAgB,GAAG,EAAE,SAAiB,GAAG;IAC5F,iCAAiC;IACjC,wCAAwC;IACxC;;;;;;EAMA,GAEA,eAAe;IACf,OAAO;AACT","debugId":null}},
    {"offset": {"line": 88, "column": 0}, "map": {"version":3,"sources":["file:///Users/4geru/space/spresense/spresense-slideshow/components/QRCodeShare.tsx"],"sourcesContent":["'use client';\n\nimport { useEffect, useState } from 'react';\nimport { QRCodeSVG } from 'qrcode.react';\n\ninterface QRCodeShareProps {\n  hashId: string;\n  isOpen: boolean;\n  onClose: () => void;\n}\n\nexport default function QRCodeShare({ hashId, isOpen, onClose }: QRCodeShareProps) {\n  const [isDesktop, setIsDesktop] = useState(false);\n  const [mounted, setMounted] = useState(false);\n\n  useEffect(() => {\n    setMounted(true);\n\n    // „Éá„Çπ„ÇØ„Éà„ÉÉ„ÉóÂà§ÂÆö\n    const checkDesktop = () => {\n      setIsDesktop(window.innerWidth >= 768);\n    };\n\n    checkDesktop();\n    window.addEventListener('resize', checkDesktop);\n\n    return () => window.removeEventListener('resize', checkDesktop);\n  }, []);\n\n  // „Éû„Ç¶„É≥„ÉàÂâç„ÄÅ„É¢„Éê„Ç§„É´„ÄÅ„Åæ„Åü„ÅØÈñâ„Åò„Å¶„ÅÑ„ÇãÂ†¥Âêà„ÅØË°®Á§∫„Åó„Å™„ÅÑ\n  if (!mounted || !isDesktop || !isOpen) {\n    return null;\n  }\n\n  const botId = process.env.NEXT_PUBLIC_LINE_BOT_ID || '@YOUR_BOT_ID';\n  // oaMessageÂΩ¢Âºè: Áõ¥Êé•„É°„ÉÉ„Çª„Éº„Ç∏„ÇíÈÄÅ‰ø°„Åô„Çã\n  const message = `Codename:${hashId}`;\n  const encodedMessage = encodeURIComponent(message);\n  const qrUrl = `https://line.me/R/oaMessage/${botId}/?${encodedMessage}`;\n\n  return (\n    <div\n      className=\"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-80\"\n      onClick={onClose}\n    >\n      <div\n        className=\"bg-gray-900 rounded-lg p-8 max-w-md w-full mx-4 shadow-2xl border border-gray-700\"\n        onClick={(e) => e.stopPropagation()}\n      >\n        {/* „Éò„ÉÉ„ÉÄ„Éº */}\n        <div className=\"flex justify-between items-center mb-6\">\n          <h2 className=\"text-xl font-bold text-white\">„Çπ„Éû„Éõ„ÅßÈñã„Åè</h2>\n          <button\n            onClick={onClose}\n            className=\"text-gray-400 hover:text-white transition\"\n            aria-label=\"Close\"\n          >\n            <svg className=\"w-6 h-6\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\n            </svg>\n          </button>\n        </div>\n\n        {/* QR„Ç≥„Éº„Éâ */}\n        <div className=\"bg-white p-6 rounded-lg mb-6 flex justify-center\">\n          <QRCodeSVG\n            value={qrUrl}\n            size={256}\n            level=\"H\"\n            includeMargin={true}\n          />\n        </div>\n\n        {/* Ë™¨Êòé */}\n        <div className=\"text-center space-y-4\">\n          <div className=\"text-gray-300 space-y-2\">\n            <p className=\"font-semibold\">„Çπ„Éû„Éõ„ÅßQR„Ç≥„Éº„Éâ„ÇíË™≠„ÅøÂèñ„Çã„Å®</p>\n            <ol className=\"text-sm text-gray-400 space-y-1 text-left pl-6\">\n              <li>1. LINE„Ç¢„Éó„É™„ÅåÈñã„Åç„Åæ„Åô</li>\n              <li>2. Bot„Å´Ëá™ÂãïÁöÑ„Å´„É°„ÉÉ„Çª„Éº„Ç∏„ÅåÈÄÅ‰ø°„Åï„Çå„Åæ„Åô</li>\n              <li>3. ÁîªÂÉè„Å®„Çπ„É©„Ç§„Éâ„Ç∑„Éß„Éº„É™„É≥„ÇØ„ÅåÂ±ä„Åç„Åæ„Åô</li>\n              <li>4. „É™„É≥„ÇØ„Çí„Çø„ÉÉ„Éó„Åó„Å¶Â§ßÁîªÈù¢„ÅßË°®Á§∫</li>\n            </ol>\n          </div>\n\n          {/* LINE BotÊÉÖÂ†± */}\n          <div className=\"pt-4 border-t border-gray-700\">\n            <p className=\"text-xs text-gray-500\">\n              „ÄåBoom!„Éí„Éº„É≠„Éº!!„ÄçBot\n            </p>\n            <p className=\"text-xs text-gray-600 mt-1\">\n              {botId}\n            </p>\n          </div>\n        </div>\n\n        {/* Èñâ„Åò„Çã„Éú„Çø„É≥ */}\n        <button\n          onClick={onClose}\n          className=\"mt-6 w-full bg-gray-700 hover:bg-gray-600 text-white py-3 rounded-lg transition\"\n        >\n          Èñâ„Åò„Çã\n        </button>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;AAkCgB;;AAhChB;AACA;;;AAHA;;;AAWe,SAAS,YAAY,EAAE,MAAM,EAAE,MAAM,EAAE,OAAO,EAAoB;;IAC/E,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,yKAAQ,EAAC;IAC3C,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,yKAAQ,EAAC;IAEvC,IAAA,0KAAS;iCAAC;YACR,WAAW;YAEX,WAAW;YACX,MAAM;sDAAe;oBACnB,aAAa,OAAO,UAAU,IAAI;gBACpC;;YAEA;YACA,OAAO,gBAAgB,CAAC,UAAU;YAElC;yCAAO,IAAM,OAAO,mBAAmB,CAAC,UAAU;;QACpD;gCAAG,EAAE;IAEL,8BAA8B;IAC9B,IAAI,CAAC,WAAW,CAAC,aAAa,CAAC,QAAQ;QACrC,OAAO;IACT;IAEA,MAAM,QAAQ,iDAAuC;IACrD,4BAA4B;IAC5B,MAAM,UAAU,CAAC,SAAS,EAAE,QAAQ;IACpC,MAAM,iBAAiB,mBAAmB;IAC1C,MAAM,QAAQ,CAAC,4BAA4B,EAAE,MAAM,EAAE,EAAE,gBAAgB;IAEvE,qBACE,6LAAC;QACC,WAAU;QACV,SAAS;kBAET,cAAA,6LAAC;YACC,WAAU;YACV,SAAS,CAAC,IAAM,EAAE,eAAe;;8BAGjC,6LAAC;oBAAI,WAAU;;sCACb,6LAAC;4BAAG,WAAU;sCAA+B;;;;;;sCAC7C,6LAAC;4BACC,SAAS;4BACT,WAAU;4BACV,cAAW;sCAEX,cAAA,6LAAC;gCAAI,WAAU;gCAAU,MAAK;gCAAO,QAAO;gCAAe,SAAQ;0CACjE,cAAA,6LAAC;oCAAK,eAAc;oCAAQ,gBAAe;oCAAQ,aAAa;oCAAG,GAAE;;;;;;;;;;;;;;;;;;;;;;8BAM3E,6LAAC;oBAAI,WAAU;8BACb,cAAA,6LAAC,sKAAS;wBACR,OAAO;wBACP,MAAM;wBACN,OAAM;wBACN,eAAe;;;;;;;;;;;8BAKnB,6LAAC;oBAAI,WAAU;;sCACb,6LAAC;4BAAI,WAAU;;8CACb,6LAAC;oCAAE,WAAU;8CAAgB;;;;;;8CAC7B,6LAAC;oCAAG,WAAU;;sDACZ,6LAAC;sDAAG;;;;;;sDACJ,6LAAC;sDAAG;;;;;;sDACJ,6LAAC;sDAAG;;;;;;sDACJ,6LAAC;sDAAG;;;;;;;;;;;;;;;;;;sCAKR,6LAAC;4BAAI,WAAU;;8CACb,6LAAC;oCAAE,WAAU;8CAAwB;;;;;;8CAGrC,6LAAC;oCAAE,WAAU;8CACV;;;;;;;;;;;;;;;;;;8BAMP,6LAAC;oBACC,SAAS;oBACT,WAAU;8BACX;;;;;;;;;;;;;;;;;AAMT;GA/FwB;KAAA","debugId":null}},
    {"offset": {"line": 320, "column": 0}, "map": {"version":3,"sources":["file:///Users/4geru/space/spresense/spresense-slideshow/app/slides/%5Bfile_id%5D/page.tsx"],"sourcesContent":["'use client';\n\nimport { useEffect, useState } from 'react';\nimport { useParams, useRouter } from 'next/navigation';\nimport Image from 'next/image';\nimport Link from 'next/link';\nimport { fetchImages } from '@/lib/supabase';\nimport { generateHashId } from '@/lib/utils';\nimport { ImageWithHash } from '@/lib/types';\nimport LiffLogin from '@/components/LiffLogin';\nimport { useLiff } from '@/contexts/LiffContext';\nimport QRCodeShare from '@/components/QRCodeShare';\n\nexport default function SlideDetailPage() {\n  const params = useParams();\n  const router = useRouter();\n  const fileId = params.file_id as string;\n\n  const { isLoggedIn, profile, isLiffReady, error: liffError, login, shareTargetPicker, isInClient } = useLiff();\n  const [images, setImages] = useState<ImageWithHash[]>([]);\n  const [currentImage, setCurrentImage] = useState<ImageWithHash | null>(null);\n  const [currentIndex, setCurrentIndex] = useState(-1);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n  const [isSharing, setIsSharing] = useState(false);\n  const [showDebug, setShowDebug] = useState(false);\n\n  useEffect(() => {\n    async function loadImages() {\n      try {\n        const data = await fetchImages();\n        const imagesWithHash = data.map(img => ({\n          ...img,\n          hashId: generateHashId(img.name)\n        }));\n\n        setImages(imagesWithHash);\n\n        // ÁèæÂú®„ÅÆÁîªÂÉè„ÇíÊ§úÁ¥¢\n        const index = imagesWithHash.findIndex(img => img.hashId === fileId);\n        if (index === -1) {\n          setError('Image not found');\n          setLoading(false);\n          return;\n        }\n\n        setCurrentImage(imagesWithHash[index]);\n        setCurrentIndex(index);\n        setLoading(false);\n      } catch (err) {\n        console.error('Error loading images:', err);\n        setError(err instanceof Error ? err.message : 'Failed to load images');\n        setLoading(false);\n      }\n    }\n\n    loadImages();\n  }, [fileId]);\n\n  // „ÇØ„É©„Ç§„Ç¢„É≥„Éà„Çµ„Ç§„Éâ„Åß„ÅÆ„Åø„Éá„Éê„ÉÉ„Ç∞Ë°®Á§∫„ÇíÊúâÂäπÂåñ\n  useEffect(() => {\n    if (process.env.NODE_ENV === 'development') {\n      setShowDebug(true);\n    }\n  }, []);\n\n  const goToPrevious = () => {\n    if (currentIndex > 0) {\n      const prevImage = images[currentIndex - 1];\n      router.push(`/slides/${prevImage.hashId}`);\n    }\n  };\n\n  const goToNext = () => {\n    if (currentIndex < images.length - 1) {\n      const nextImage = images[currentIndex + 1];\n      router.push(`/slides/${nextImage.hashId}`);\n    }\n  };\n\n  // „Ç≠„Éº„Éú„Éº„Éâ„Éä„Éì„Ç≤„Éº„Ç∑„Éß„É≥\n  useEffect(() => {\n    const handleKeyDown = (e: KeyboardEvent) => {\n      if (e.key === 'ArrowLeft') {\n        goToPrevious();\n      } else if (e.key === 'ArrowRight') {\n        goToNext();\n      } else if (e.key === 'Escape') {\n        router.push('/slides');\n      }\n    };\n\n    window.addEventListener('keydown', handleKeyDown);\n    return () => window.removeEventListener('keydown', handleKeyDown);\n  }, [currentIndex, images]);\n\n  if (loading || !isLiffReady) {\n    return (\n      <div className=\"flex min-h-screen items-center justify-center bg-black\">\n        <div className=\"text-center\">\n          <div className=\"text-white text-2xl mb-4\">Loading...</div>\n          {liffError && (\n            <div className=\"text-red-400 text-sm max-w-md mx-auto p-4 bg-red-900/20 rounded\">\n              <p className=\"font-bold mb-2\">LIFF Error:</p>\n              <p>{liffError}</p>\n            </div>\n          )}\n          {!loading && !isLiffReady && !liffError && (\n            <div className=\"text-gray-400 text-sm mt-4\">\n              Initializing LIFF... Please wait.\n            </div>\n          )}\n        </div>\n      </div>\n    );\n  }\n\n  if (error || !currentImage) {\n    return (\n      <div className=\"flex min-h-screen items-center justify-center bg-black\">\n        <div className=\"text-red-400 text-xl text-center\">\n          <p>{error || 'Image not found'}</p>\n          <Link href=\"/slides\" className=\"mt-4 inline-block text-blue-400 hover:text-blue-300\">\n            ‚Üê Back to Gallery\n          </Link>\n        </div>\n      </div>\n    );\n  }\n\n  const handleShare = async () => {\n    if (!isLoggedIn) {\n      alert('Please login first');\n      return;\n    }\n\n    setIsSharing(true);\n    try {\n      const botId = process.env.NEXT_PUBLIC_LINE_BOT_ID || '@YOUR_BOT_ID';\n      const addFriendUrl = `https://line.me/R/ti/p/${botId}`;\n      const senderName = profile?.displayName || '„ÅÇ„Å™„Åü';\n\n      await shareTargetPicker([\n        // 1. ÁîªÂÉè„É°„ÉÉ„Çª„Éº„Ç∏\n        {\n          type: 'image',\n          originalContentUrl: currentImage.url,\n          previewImageUrl: currentImage.url,\n        },\n        // 2. FlexMessageÔºà„Ç¢„Éó„É™Ë™¨Êòé + ÂèãÈÅîËøΩÂä†Ôºâ\n        {\n          type: 'flex',\n          altText: `${senderName}„Åï„Çì„Åã„ÇâÁîªÂÉè„ÇíÂèó„ÅëÂèñ„Çä„Åæ„Åó„Åü - Boom!„Éí„Éº„É≠„Éº!!`,\n          contents: {\n            type: 'bubble',\n            hero: {\n              type: 'image',\n              url: `${window.location.origin}/boom-hero-intro.jpg`,\n              size: 'full',\n              aspectMode: 'cover',\n              aspectRatio: '5:2',\n            },\n            body: {\n              type: 'box',\n              layout: 'vertical',\n              contents: [\n                // 1. ÁîªÂÉè„ÇíÂèó„ÅëÂèñ„Çä„Åæ„Åó„Åü\n                {\n                  type: 'text',\n                  text: `${senderName}„Åï„Çì„Åã„ÇâÁîªÂÉè„ÇíÂèó„ÅëÂèñ„Çä„Åæ„Åó„Åü`,\n                  size: 'md',\n                  color: '#06C755',\n                  weight: 'bold',\n                  wrap: true,\n                },\n                // 2. Bot „ÅÆË™¨Êòé\n                {\n                  type: 'box',\n                  layout: 'vertical',\n                  margin: 'lg',\n                  spacing: 'sm',\n                  contents: [\n                    {\n                      type: 'text',\n                      text: 'üì∏ ÂÜôÁúü„ÇíÈÄÅ„Çã„Å†„Åë„Åß',\n                      color: '#aaaaaa',\n                      size: 'sm',\n                      wrap: true,\n                      margin: 'md',\n                    },\n                    {\n                      type: 'text',\n                      text: 'üé® AI„Åå„Ç¢„É°„Ç≥„ÉüÈ¢®„Å´Â§âÊèõ',\n                      color: '#aaaaaa',\n                      size: 'sm',\n                      wrap: true,\n                    }\n                  ],\n                },\n                // 3. „Çª„Éë„É¨„Éº„Çø„Éº\n                {\n                  type: 'separator',\n                  margin: 'lg',\n                },\n                // 4. Bot „ÅÆËøΩÂä†„Éú„Çø„É≥\n                {\n                  type: 'button',\n                  style: 'primary',\n                  height: 'sm',\n                  action: {\n                    type: 'uri',\n                    label: 'ÂèãÈÅîËøΩÂä†„Åó„Å¶‰Ωø„Å£„Å¶„Åø„Çã',\n                    uri: addFriendUrl,\n                  },\n                  color: '#06C755',\n                  margin: 'lg',\n                },\n              ],\n              backgroundColor: '#16213e',\n              paddingAll: 'lg',\n            },\n            styles: {\n              body: {\n                backgroundColor: '#16213e',\n              },\n            },\n          },\n        },\n      ]);\n    } catch (err) {\n      console.error('Share failed:', err);\n      const errorMessage = err instanceof Error ? err.message : 'Share failed';\n      alert(errorMessage);\n    } finally {\n      setIsSharing(false);\n    }\n  };\n\n  return (\n    <div className=\"relative w-screen h-screen bg-black\">\n      {/* „Éò„ÉÉ„ÉÄ„Éº */}\n      <div className=\"fixed top-0 left-0 right-0 z-10 bg-black bg-opacity-70 text-white p-4\">\n        <div className=\"flex justify-between items-center\">\n          <Link href=\"/slides\" className=\"hover:text-gray-300 transition text-sm\">\n            ‚Üê Back\n          </Link>\n          <div className=\"text-sm\">\n            {currentIndex + 1} / {images.length}\n          </div>\n          <div className=\"flex items-center gap-2\">\n            {isLoggedIn && profile ? (\n              <>\n                <span className=\"text-sm hidden sm:block\">{profile.displayName}</span>\n                {profile.pictureUrl && (\n                  <img\n                    src={profile.pictureUrl}\n                    alt={profile.displayName}\n                    className=\"w-8 h-8 rounded-full\"\n                  />\n                )}\n              </>\n            ) : (\n              <button\n                onClick={login}\n                className=\"bg-[#06C755] hover:bg-[#05b34c] text-white px-4 py-2 rounded text-sm transition\"\n              >\n                Login\n              </button>\n            )}\n          </div>\n        </div>\n      </div>\n\n      {/* „É°„Ç§„É≥ÁîªÂÉè */}\n      <div className=\"w-full h-full flex items-center justify-center pt-16 pb-24\">\n        <div className=\"relative w-full h-full\">\n          <Image\n            src={currentImage.url}\n            alt={currentImage.name}\n            fill\n            className=\"object-contain\"\n            priority\n            unoptimized\n          />\n        </div>\n      </div>\n\n      {/* „Éä„Éì„Ç≤„Éº„Ç∑„Éß„É≥„Éú„Çø„É≥ */}\n      {currentIndex > 0 && (\n        <button\n          onClick={goToPrevious}\n          className=\"fixed left-4 top-1/2 -translate-y-1/2 bg-black bg-opacity-50 hover:bg-opacity-70 text-white p-4 rounded-full transition\"\n          aria-label=\"Previous image\"\n        >\n          <svg className=\"w-8 h-8\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15 19l-7-7 7-7\" />\n          </svg>\n        </button>\n      )}\n\n      {currentIndex < images.length - 1 && (\n        <button\n          onClick={goToNext}\n          className=\"fixed right-4 top-1/2 -translate-y-1/2 bg-black bg-opacity-50 hover:bg-opacity-70 text-white p-4 rounded-full transition\"\n          aria-label=\"Next image\"\n        >\n          <svg className=\"w-8 h-8\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 5l7 7-7 7\" />\n          </svg>\n        </button>\n      )}\n\n      {/* „Éï„ÉÉ„Çø„Éº */}\n      <div className=\"fixed bottom-0 left-0 right-0 z-10 bg-black bg-opacity-70 text-white p-4\">\n        <div className=\"flex justify-between items-center gap-4\">\n          <div className=\"flex-1 min-w-0\">\n            <div className=\"text-sm truncate\">{currentImage.name}</div>\n            <div className=\"text-xs text-gray-400 mt-1\">\n              {new Date(currentImage.created_at).toLocaleString()} ¬∑ {(currentImage.size / 1024).toFixed(2)} KB\n            </div>\n          </div>\n          {isLoggedIn && (\n            <button\n              onClick={handleShare}\n              disabled={isSharing}\n              className=\"bg-[#06C755] hover:bg-[#05b34c] disabled:bg-gray-600 text-white px-4 py-2 rounded text-sm transition flex items-center gap-2 whitespace-nowrap\"\n            >\n              <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.368 2.684 3 3 0 00-5.368-2.684z\" />\n              </svg>\n              {isSharing ? 'Sharing...' : 'Share'}\n            </button>\n          )}\n        </div>\n      </div>\n\n      {/* „Ç≠„Éº„Éú„Éº„Éâ„Éí„É≥„Éà */}\n      <div className=\"fixed bottom-24 right-4 text-gray-400 text-xs hidden md:block\">\n        ‚Üê ‚Üí to navigate ¬∑ ESC to close\n      </div>\n\n      {/* „Éá„Éê„ÉÉ„Ç∞ÊÉÖÂ†± (ÈñãÁô∫Áí∞Â¢É„ÅÆ„Åø) */}\n      {showDebug && (\n        <div className=\"fixed top-20 right-4 bg-gray-900/90 text-white text-xs p-3 rounded max-w-xs z-50\">\n          <div className=\"font-bold mb-2\">LIFF Debug</div>\n          <div>isInClient: {isInClient ? '‚úÖ Yes' : '‚ùå No'}</div>\n          <div>isLoggedIn: {isLoggedIn ? '‚úÖ Yes' : '‚ùå No'}</div>\n          <div>isLiffReady: {isLiffReady ? '‚úÖ Yes' : '‚ùå No'}</div>\n          {liffError && <div className=\"text-red-400 mt-2\">Error: {liffError}</div>}\n        </div>\n      )}\n\n      {/* QR„Ç≥„Éº„Éâ„É¢„Éº„ÉÄ„É´ */}\n      <QRCodeShare\n        hashId={fileId}\n        isOpen={isQRModalOpen}\n        onClose={() => setIsQRModalOpen(false)}\n      />\n    </div>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}