{"version":3,"sources":["turbopack:///[project]/node_modules/next/src/server/route-modules/app-page/vendored/contexts/hooks-client-context.ts","turbopack:///[project]/node_modules/next/src/server/route-modules/app-page/vendored/contexts/server-inserted-html.ts","turbopack:///[project]/node_modules/next/src/server/route-modules/app-page/vendored/contexts/app-router-context.ts","turbopack:///[project]/node_modules/next/src/server/route-modules/app-page/vendored/ssr/react-server-dom-turbopack-client.ts","turbopack:///[project]/node_modules/next/src/server/route-modules/app-page/vendored/ssr/react-dom.ts","turbopack:///[project]/lib/supabase.ts","turbopack:///[project]/lib/utils.ts"],"sourcesContent":["module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['contexts'].HooksClientContext\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['contexts'].ServerInsertedHtml\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['contexts'].AppRouterContext\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.ReactServerDOMTurbopackClient\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.ReactDOM\n","import { ImageData } from './types';\n\nconst supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL;\nconst supabaseKey = process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY;\n\n/**\n * Supabaseから全画像を取得\n */\nexport async function fetchImages(): Promise<ImageData[]> {\n  if (!supabaseUrl || !supabaseKey) {\n    throw new Error('Supabase configuration missing');\n  }\n\n  const response = await fetch(`${supabaseUrl}/functions/v1/get-original-images`, {\n    method: 'GET',\n    headers: {\n      'Authorization': `Bearer ${supabaseKey}`,\n      'apikey': supabaseKey,\n      'Content-Type': 'application/json'\n    },\n    cache: 'no-store', // 常に最新データを取得\n  });\n\n  if (!response.ok) {\n    const errorText = await response.text();\n    throw new Error(`HTTP error! status: ${response.status} - ${errorText}`);\n  }\n\n  const result = await response.json();\n\n  if (result.success && result.images) {\n    return result.images.map((image: any) => ({\n      name: image.name,\n      url: image.url,\n      created_at: image.created_at,\n      size: image.size\n    }));\n  }\n\n  throw new Error(result.error || 'No images returned from Edge Function');\n}\n","/**\n * ファイル名から安定したハッシュIDを生成\n * 同じファイル名なら常に同じハッシュIDが生成される\n */\nexport function generateHashId(fileName: string): string {\n  let hash = 0;\n  for (let i = 0; i < fileName.length; i++) {\n    const char = fileName.charCodeAt(i);\n    hash = ((hash << 5) - hash) + char;\n    hash = hash & hash; // Convert to 32bit integer\n  }\n\n  // 絶対値を取って16進数に変換（9文字）\n  return Math.abs(hash).toString(16).padStart(9, '0').substring(0, 9);\n}\n\n/**\n * ハッシュIDから対応する画像を検索\n */\nexport function findImageByHashId(images: { name: string; [key: string]: any }[], hashId: string) {\n  return images.find(img => generateHashId(img.name) === hashId);\n}\n\n/**\n * Supabaseの画像URLをサムネイル用に変換\n * 画像変換APIを使用してサムネイルを取得\n */\nexport function getThumbnailUrl(originalUrl: string, width: number = 400, height: number = 400): string {\n  // まず元のURLをそのまま返す（画像変換APIが使えない場合）\n  // TODO: Supabase画像変換APIが有効な場合は以下のコードを使用\n  /*\n  const url = originalUrl.replace(\n    '/storage/v1/object/public/',\n    '/storage/v1/render/image/public/'\n  );\n  return `${url}?width=${width}&height=${height}&resize=cover&quality=80`;\n  */\n\n  // 一時的に元のURLを返す\n  return originalUrl;\n}\n"],"names":["module","exports","require","vendored","HooksClientContext","ServerInsertedHtml","AppRouterContext","ReactServerDOMTurbopackClient","ReactDOM"],"mappings":"6CAAAA,EAAOC,OAAO,CACZC,EAAQ,CAAA,CAAA,IAAA,GACRC,QAAQ,CAAC,QAAW,CAACC,kBAAkB,+BCFzCJ,EAAOC,OAAO,CACZC,EAAQ,CAAA,CAAA,IAAA,GACRC,QAAQ,CAAC,QAAW,CAACE,kBAAkB,giBCFzCL,GAAOC,OAAO,CACZC,EAAQ,CAAA,CAAA,IAAA,GACRC,QAAQ,CAAC,QAAW,CAACG,gBAAgB,+BCFvCN,EAAOC,OAAO,CACZC,EAAQ,CAAA,CAAA,IAAA,GACRC,QAAQ,CAAC,YAAY,CAAEI,6BAA6B,+BCFtDP,EAAOC,OAAO,CACZC,EAAQ,CAAA,CAAA,IAAA,GACRC,QAAQ,CAAC,YAAY,CAAEK,QAAQ,+BCCjC,IAAM,EAAA,mNAKC,eAAe,IAKpB,IAAM,EAAW,MAAM,MAAM,GAAG,YAAY,iCAAiC,CAAC,2BAAE,CAC9E,OAAQ,MACR,QAAS,CACP,cAAiB,CAAC,OAAO,EAAE,EAAA,CAAa,CACxC,OAAU,EACV,eAAgB,kBAClB,EACA,MAAO,UACT,GAEA,GAAI,CAAC,EAAS,EAAE,CAAE,CAChB,IAAM,EAAY,MAAM,EAAS,IAAI,EACrC,OAAM,AAAI,MAAM,CAAC,oBAAoB,EAAE,EAAS,MAAM,CAAC,GAAG,EAAE,EAAA,CAAW,CACzE,CAEA,IAAM,EAAS,MAAM,EAAS,IAAI,GAElC,GAAI,EAAO,OAAO,EAAI,EAAO,MAAM,CACjC,CADmC,MAC5B,EAAO,MAAM,CAAC,GAAG,CAAC,AAAC,IAAgB,CACxC,GADuC,EACjC,EAAM,IAAI,CAChB,IAAK,EAAM,GAAG,CACd,WAAY,EAAM,UAAU,CAC5B,KAAM,EAAM,IAAI,CAClB,CAAC,CAGH,OAAM,AAAI,MAAM,EAAO,KAAK,EAAI,wCAClC,CCpCO,SAAS,EAAe,CAAgB,EAC7C,IAAI,EAAO,EACX,IAAK,IAAI,EAAI,EAAG,EAAI,EAAS,MAAM,CAAE,IAAK,AAExC,EAAQ,AAAC,KAAQ,CAAC,CAAI,EADT,EAAS,GACQ,OADE,CAAC,GAEjC,GAAc,EAIhB,EAJS,EAAa,GAIf,KAAK,GAAG,CAAC,GAAM,QAAQ,CAAC,GAJkB,CAId,QAAQ,CAAC,EAAG,KAAK,SAAS,CAAC,EAAG,EACnE","ignoreList":[0,1,2,3,4]}